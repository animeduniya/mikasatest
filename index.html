<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rishab Chatbot</title>
    <style>
        body {
            margin: 0;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #1c1c1c;
            animation: backgroundAnimation 20s ease-in-out infinite;
        }

        @keyframes backgroundAnimation {
            0% {
                background: url('https://wallpapercave.com/wp/wp9388551.jpg') center center / cover no-repeat;
            }

            25% {
                background: url('https://cdn.wallpapersafari.com/64/65/QhkeST.jpg') center center / cover no-repeat;
            }

            50% {
                background: url('https://png.pngtree.com/thumb_back/fw800/background/20230331/pngtree-starry-sky-forest-night-scene-image_2127839.jpg') center center / cover no-repeat;
            }

            75% {
                background: url('https://wallpaperaccess.com/full/8583147.jpg') center center / cover no-repeat;
            }

            100% {
                background: url('https://coolwallpapers.me/picsup/2503093-4k-hd-wallpaper-high-definition.jpg') center center / cover no-repeat;
            }
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
        }

        .profile {
            background-color: cyan;
            border: none;
            border-radius: 30px;
            padding: 10px 15px;
            cursor: pointer;
        }

        /* Pop-Up Styles */
        .popup {
            display: none;
            position: fixed;
            z-index: 2000;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(40, 40, 40, 0.95);
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
            width: 80%;
            max-width: 500px;
            padding: 20px;
            text-align: center;
            animation: popupAnimation 0.5s ease forwards;
        }

        @keyframes popupAnimation {
            from {
                opacity: 0;
                transform: translate(-50%, -60%);
            }

            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        .popup h2 {
            color: cyan;
        }

        /* Container Styles */
        .container {
            width: 95%;
            max-width: 800px;
            height: 90vh;
            overflow-y: auto;
            background-color: rgba(30, 30, 30, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            position: relative;
            padding: 10px;
            border: 5px solid transparent; /* Initial border for RGB effect */
            animation: rgbBorder 5s linear infinite; /* RGB border animation */
        }

        /* Chat Window Styles */
        .chat-window {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 10px;
            position: relative;
            overflow-y: auto;
            border: 5px solid transparent; /* Same initial border for chat window */
            animation: rgbBorder 5s linear infinite; /* Apply same RGB animation */
        }

        .sub-header {
            text-align: center;
            color: cyan;
        }

        /* Message Styles */
        .message {
            padding: 10px 15px;
            border-radius: 20px;
            margin: 5px 0;
            max-width: 70%;
            word-wrap: break-word;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        /* User Message Style */
        .message.user {
            background-color: #00ccff;
            color: #000;
            align-self: flex-end;
            margin-left: auto; /* Align to right */
        }

        /* Bot Message Style */
        .message.bot {
            background-color: #4caf50;
            color: #fff;
            align-self: flex-start;
        }

        /* User Input Styles */
        .user-input {
            display: flex;
            align-items: center;
            padding: 10px 0;
        }

        .user-input input {
            flex: 1;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid cyan;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            margin-right: 10px;
            transition: border 0.3s;
        }

        .user-input input:focus {
            outline: none;
            border: 2px solid #00ccff;
        }

        .user-input button {
            border: none;
            font-size: 1.1em;
            padding: 10px 15px;
            border-radius: 30px;
            cursor: pointer;
            margin-left: 5px;
            background: cyan;
            color: #ffffff;
            transition: background 0.3s, transform 0.2s;
        }

        /* Action Button Styles */
        .action-button {
            width: 100%;
            padding: 12px;
            border-radius: 30px;
            color: #ffffff;
            font-weight: bold;
            font-size: 1.1em;
            text-align: center;
            margin-top: 10px;
            background: cyan;
            border: none;
            transition: all 0.3s;
        }

        .action-button:hover {
            background: #00c8e1;
            transform: scale(1.05);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(40, 40, 40, 0.95);
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 400px;
            overflow: hidden;
            animation: rgbBorder 5s linear infinite; /* Same RGB animation */
        }

        /* More styles... */
       
        /* Chat History Styles */
        .chat-history {
            flex: 0 1 20%;
            overflow-y: auto;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 5px 10px rgba(255, 255, 255, 0.2);
        }

        /* Scrollbar Customization */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #00fff0;
            border-radius: 10px;
        }

        /* Emoji Picker Styles */
        .emoji-picker {
            display: none;
            background: rgba(0, 0, 0, 0.8);
            position: absolute;
            z-index: 1000;
            border-radius: 10px;
            padding: 5px;
        }

        .emoji-picker button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5em;
        }

        /* Theme Styles */
        body.theme-color-1 {
            color: #ff5722;
        }

        /* Dark/Light Mode */
        body.light-mode {
            background-color: #ffffff;
            color: #000000;
        }

        body.dark-mode {
            background-color: #1c1c1c;
            color: #ffffff;
        }

        /* Feedback button styles */
        .feedback {
            margin: 5px;
        }
    </style>
</head>

<body class="light-mode">
    <div class="header">
        <div class="title">Rishab Chatbot</div>
        <button class="profile" onclick="openAuthModal()">Profile</button>
    </div>

    <div class="popup" id="introPopup">
        <h2>Welcome to Rishab Chatbot!</h2>
        <p>This is your personalized assistant. Engage in delightful conversations and receive daily facts!</p>
        <button onclick="closePopup()">Got it!</button>
    </div>

    <div class="container" id="chatContainer">
        <div class="chat-history">
            <h3>Chat History</h3>
            <ul id="chatList"></ul>
            <button class="action-button" onclick="exportChat();">üé§ Export Chat</button>
            <button class="action-button" onclick="summarizeChat();">üìù Summarize Chat</button>
            <button class="action-button" onclick="resetChat();">üîÑ Add New Chat</button>
        </div>
        <div class="chat-window">
            <div class="header" id="chatbotName">Rishab - Your AI Companion</div>
            <div class="sub-header">Made by Rishab, Ansh, and Abhi</div>
            <div class="messages" id="chatbox" role="log" aria-live="polite"></div>
            <div class="user-input">
                <input type="text" id="userInput" placeholder="Type your message here..." onkeydown="if(event.key === 'Enter') sendMessage();" aria-label="Type your message" />
                <button onclick="sendMessage()">üì§</button>
                <button onclick="openSettings()">‚öôÔ∏è</button>
                <button onclick="toggleEmojiPicker()">üòÄ</button>
                <button onclick="startVoiceInput()">üé§</button>
                <button onclick="copyToClipboard()">üìã</button>
            </div>
            <div class="quick-replies">
                <span class="quick-reply" onclick="chooseQuickReply('Hello')">Hello</span>
                <span class="quick-reply" onclick="chooseQuickReply('Help')">Help</span>
                <span class="quick-reply" onclick="chooseQuickReply('Goodbye')">Goodbye</span>
            </div>
            <div class="emoji-picker" id="emojiPicker">
                <button onclick="addEmoji('üòÄ')">üòÄ</button>
                <button onclick="addEmoji('üòÅ')">üòÅ</button>
                <button onclick="addEmoji('üòÇ')">üòÇ</button>
                <button onclick="addEmoji('üòÉ')">üòÉ</button>
                <button onclick="addEmoji('üòÑ')">üòÑ</button>
                <button onclick="addEmoji('üòä')">üòä</button>
                <button onclick="addEmoji('üòç')">üòç</button>
                <button onclick="addEmoji('üòé')">üòé</button>
                <button onclick="addEmoji('üòú')">üòú</button>
                <button onclick="addEmoji('üò¢')">üò¢</button>
                <button onclick="addEmoji('üò°')">üò°</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span onclick="closeSettings()" style="float:right;cursor:pointer;color:#00fff0;">√ó</span>
            <h2>Settings</h2>

            <label for="botName">Chatbot Name:</label>
            <input type="text" id="botNameInput" value="Rishab" />

            <label for="language">Language:</label>
            <select id="language" onchange="changeLanguage()">
                <option value="en">English</option>
                <option value="es">Spanish</option>
                <option value="fr">French</option>
                <option value="de">German</option>
                <option value="it">Italian</option>
                <option value="jp">Japanese</option>
                <option value="cn">Chinese</option>
            </select>

            <label class="example-checkbox">
                <input type="checkbox" id="voiceToggle" onchange="toggleVoice()" checked>
                Enable Voice
            </label>

            <div>
                <label for="dayCycle">Toggle Dark/Light Mode</label>
                <input type="checkbox" id="dayCycle" onchange="toggleMode()">
            </div>

            <button onclick="setReminder()">‚úÖ Set Reminder</button>
            <button onclick="showDailyFact()">üîç Get Daily Fact/Quote</button>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span onclick="closeAuthModal()" style="float:right;cursor:pointer;color:#00fff0;">√ó</span>
            <h2>Login / Register</h2>
            <input type="email" id="email" placeholder="Email" />
            <input type="password" id="password" placeholder="Password" />
            <button onclick="register()">Register</button>
            <button onclick="login()">Login</button>
            <button onclick="logout()">Logout</button>
        </div>
    </div>

    <audio id="musicPlayer" src="" preload="auto"></audio>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD0PGTsX1IJLm2qwh--7aKv3itQ7vrla-k",
            authDomain: "mikasa-519d1.firebaseapp.com",
            projectId: "mikasa-519d1",
            storageBucket: "mikasa-519d1.firebasestorage.app",
            messagingSenderId: "190611410740",
            appId: "1:190611410740:web:d6c0e2e5a8b0e060c79f61"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        let chatbotName = "Rishab";
        let voiceEnabled = true;
        let messageCount = 0;
        const chatMessages = [];
        const chatAnswers = [];
        const musicPlayer = document.getElementById('musicPlayer');
        let speechSynthesisInstance = window.speechSynthesis;

        // List of daily facts
        const facts = [
            "Did you know? Honey never spoils!",
            "Bananas are berries, but strawberries aren't.",
            "The Eiffel Tower can be 15 cm taller during the summer.",
            "A group of flamingos is called a 'flamboyance'.",
            "Octopuses have three hearts.",
            "Did you know that wombat poop is cube-shaped?",
            "One teaspoon of honey is the life work of 12 bees.",
            "An octopus has nine brains!",
            "The longest wedding veil was longer than 63 football fields!",
            "A day on Venus is longer than a year on Venus."
        ];

        window.onload = function () {
            loadPreferences();
            displayRandomFact();
            document.getElementById("introPopup").style.display = "block"; // Show pop-up on load
            document.getElementById("authModal").style.display = "block"; // Show auth modal on load

            auth.onAuthStateChanged(user => {
                if (user) {
                    console.log('User logged in: ', user.email);
                    document.getElementById("authModal").style.display = "none"; // Hide auth modal when logged in
                } else {
                    console.log('User not logged in');
                }
            });
        };

        function closePopup() {
            document.getElementById("introPopup").style.display = "none"; // Close pop-up
        }

        function closeAuthModal() {
            document.getElementById("authModal").style.display = "none"; // Close auth modal
        }

        function register() {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            auth.createUserWithEmailAndPassword(email, password)
                .then(() => {
                    alert('Registration successful!');
                })
                .catch(error => {
                    alert(error.message);
                });
        }

        function login() {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            auth.signInWithEmailAndPassword(email, password)
                .then(() => {
                    alert('Login successful!');
                    document.getElementById("authModal").style.display = "none"; // Hide auth modal on login
                })
                .catch(error => {
                    alert(error.message);
                });
        }

        function logout() {
            auth.signOut().then(() => {
                alert('Logged out successfully!');
                document.getElementById("authModal").style.display = "block"; // Show auth modal again
            });
        }

        function loadPreferences() {
            const savedLang = localStorage.getItem('language');
            const savedTheme = localStorage.getItem('theme');
            const savedBotName = localStorage.getItem('botName');

            if (savedLang) {
                document.getElementById("language").value = savedLang;
            }

            // Load theme
            if (savedTheme) {
                document.body.className = savedTheme;
            } else {
                document.body.classList.add('light-mode');
            }

            if (savedBotName) {
                chatbotName = savedBotName;
                document.getElementById("chatbotName").innerText = chatbotName + " - Your AI Companion";
                document.getElementById("botNameInput").value = chatbotName;
            }
        }

        function displayRandomFact() {
            const randomFact = facts[Math.floor(Math.random() * facts.length)];
            document.getElementById("dailyFact").textContent = randomFact;
        }

        function toggleMode() {
            if (document.body.classList.contains('light-mode')) {
                document.body.className = 'dark-mode';
                localStorage.setItem('theme', 'dark-mode');
            } else {
                document.body.className = 'light-mode';
                localStorage.setItem('theme', 'light-mode');
            }
        }

        function loadMusic(event) {
            const file = event.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                musicPlayer.src = url;
            }
        }

        function playMusic() {
            if (musicPlayer.paused) {
                musicPlayer.play();
            } else {
                musicPlayer.pause();
            }
        }

        function setVolume(value) {
            musicPlayer.volume = value;
        }

        function speakResponse(response) {
            if (speechSynthesisInstance.speaking) {
                speechSynthesisInstance.cancel();
            }

            if (voiceEnabled) {
                const utterance = new SpeechSynthesisUtterance(response);
                utterance.lang = "en-US";
                speechSynthesisInstance.speak(utterance);
            }
        }

        async function sendMessage() {
            const userInput = document.getElementById("userInput");
            const chatbox = document.getElementById("chatbox");
            const chatList = document.getElementById("chatList");

            if (userInput.value.trim()) {
                const userMessage = userInput.value.trim();
                const userMessageDiv = document.createElement("div");
                userMessageDiv.className = "message user";
                userMessageDiv.textContent = "üßë: " + userMessage;
                chatbox.appendChild(userMessageDiv);
                chatList.appendChild(document.createElement("li")).textContent = userMessage;

                chatMessages.push(userMessage); // Store question

                const typingIndicator = document.createElement("div");
                typingIndicator.innerHTML = "<em>ü§ñ Rishab is typing...</em>";
                chatbox.appendChild(typingIndicator);

                try {
                    await delayResponse(); // Simulate thinking delay
                    let response;

                    // Dynamic response based on user input
                    if (/what's your name|who are you/i.test(userMessage)) {
                        response = `My name is ${chatbotName}.`;
                    } else if (/who made you|your creator/i.test(userMessage)) {
                        response = "I was made by Rishab.";
                    } else if (/help/i.test(userMessage)) {
                        response = "You can ask me anything! Type 'random fact' for interesting facts.";
                    } else if (/fact/i.test(userMessage)) {
                        response = facts[Math.floor(Math.random() * facts.length)];
                    } else {
                        response = "I'm still learning!"; // Static response
                    }

                    chatbox.removeChild(typingIndicator);

                    const botMessageDiv = document.createElement("div");
                    botMessageDiv.className = "message bot";
                    botMessageDiv.textContent = `ü§ñ ${chatbotName}: ${response || "I'm still learning!"}`;
                    chatbox.appendChild(botMessageDiv);

                    chatAnswers.push(`ü§ñ ${chatbotName}: ${response || "I'm still learning!"}`);

                    speakResponse(response);
                    messageCount++;
                } catch (error) {
                    const errorMessageDiv = document.createElement("div");
                    errorMessageDiv.className = "message bot";
                    errorMessageDiv.textContent = `ü§ñ ${chatbotName}: Oops! Something went wrong. Please try again.`;
                    chatbox.appendChild(errorMessageDiv);
                }

                // Save the message to local storage
                localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
                
                chatbox.scrollTop = chatbox.scrollHeight;
                userInput.value = ""; // Clear input
            }
        }

        function delayResponse() {
            return new Promise(resolve => setTimeout(resolve, 1000)); // Simulates typing delay
        }

        function addEmoji(emoji) {
            const userInput = document.getElementById("userInput");
            userInput.value += emoji;
            document.getElementById('emojiPicker').style.display = 'none'; // Hide emoji picker
        }

        function toggleEmojiPicker() {
            const emojiPicker = document.getElementById('emojiPicker');
            emojiPicker.style.display = emojiPicker.style.display === 'block' ? 'none' : 'block';
        }

        function chooseQuickReply(reply) {
            const userInput = document.getElementById("userInput");
            userInput.value += reply; // Append the quick reply to input
            sendMessage(); // Send the message
        }

        function copyToClipboard() {
            const lastMessageElement = document.getElementById("chatbox").lastChild;
            if (lastMessageElement) {
                const textToCopy = lastMessageElement.textContent;
                navigator.clipboard.writeText(textToCopy).then(() => {
                    alert("Copied to clipboard: " + textToCopy);
                });
            }
        }

        function summarizeChat() {
            const summaryDiv = document.createElement("div");
            summaryDiv.className = "message bot";
            const summaryText = `Chat Summary:\nOverview of your questions: ${chatMessages.join(", ")}.\nTotal Messages: ${chatMessages.length}`;
            summaryDiv.textContent = summaryText;
            document.getElementById("chatbox").appendChild(summaryDiv);
            document.getElementById("chatbox").scrollTop = document.getElementById("chatbox").scrollHeight;
        }

        function exportChat() {
            let exportText = "";
            for (let i = 0; i < chatMessages.length; i++) {
                exportText += `üßë: ${chatMessages[i]}\n${chatAnswers[i]}\n`;
            }
            const blob = new Blob([exportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'chat_history.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        function changeLanguage() {
            const selectedLanguage = document.getElementById("language").value;
            localStorage.setItem('language', selectedLanguage);
            alert("Language changed to: " + selectedLanguage);
        }

        function resetChat() {
            const chatbox = document.getElementById("chatbox");
            const chatList = document.getElementById("chatList");
            chatbox.innerHTML = "";
            chatList.innerHTML = "";
            messageCount = 0;
            chatMessages.length = 0;
            chatAnswers.length = 0;
            localStorage.removeItem('chatMessages'); // Clear stored messages
        }

        function openSettings() {
            document.getElementById("settingsModal").style.display = "block";
        }

        function closeSettings() {
            const newBotName = document.getElementById("botNameInput").value;
            if (newBotName) {
                chatbotName = newBotName;
                document.getElementById("chatbotName").innerText = chatbotName + " - Your AI Companion";
                localStorage.setItem('botName', chatbotName);
            }
            document.getElementById("settingsModal").style.display = "none";
        }

        function toggleVoice() {
            voiceEnabled = document.getElementById("voiceToggle").checked;
            alert("Voice responses are now " + (voiceEnabled ? "enabled" : "disabled") + ".");
        }

        function setReminder() {
            const reminderText = prompt("What would you like to be reminded about? (Using setTimeout for demo)");
            if (reminderText) {
                setTimeout(() => {
                    alert(`Reminder: ${reminderText}`);
                }, 10000); // Remind after 10 seconds for demonstration purposes
                alert("Reminder set! You will be alerted in 10 seconds.");
            }
        }

        function showDailyFact() {
            const randomFact = facts[Math.floor(Math.random() * facts.length)];
            alert(`Daily Fact: ${randomFact}`);
        }

        function sendFeedback() {
            const feedback = prompt("Rate my response: (1-5)");
            if (feedback) {
                alert("Thank you for your feedback: " + feedback);
            }
        }
        
        function openAuthModal() {
            document.getElementById("authModal").style.display = "block";
        }

        function closeAuthModal() {
            document.getElementById("authModal").style.display = "none"; // Close auth modal
        }

        function startVoiceInput() {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'en-US';
            recognition.interimResults = false;
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                document.getElementById("userInput").value = transcript;
                sendMessage(); // Automatically send the message
            };
        
            recognition.onerror = function(event) {
                console.error(event.error);
            };

            recognition.start();
        }
    </script>
</body>

</html>
