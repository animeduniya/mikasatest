<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mikasa Chatbot</title>
    <style>
        /* Basic styles for the chatbot interface */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #282c34;
            color: white;
            font-family: Arial, sans-serif;
            flex-direction: column;
        }

        .chatbot-container {
            background: rgba(0, 0, 0, 0.85);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            width: 300px;
        }

        .settings-menu {
            display: none;
        }

        .message {
            margin: 10px;
            padding: 10px;
            border-radius: 5px;
        }

        .user {
            background-color: #007bff;
            color: white;
            text-align: right;
        }

        .bot {
            background-color: #28a745;
            color: white;
        }

        .typing-indicator {
            display: none;
        }
    </style>
</head>

<body>
    <div class="chatbot-container">
        <div id="chatbox"></div>
        <div id="typingIndicator" class="typing-indicator">ðŸ¤– Mikasa is typing...</div>

        <input type="text" id="userInput" placeholder="Type your message..." />
        <button onclick="sendMessage()">Send</button>

        <button onclick="playDefaultMusic()">Play Default Music</button>
        <button onclick="document.getElementById('settingsWindow').style.display = 'block';">Settings</button>

        <div id="settingsWindow" class="settings-menu">
            <h3>Audio Settings</h3>
            <label for="musicSource">Background Music:</label>
            <input type="file" id="musicSource" accept="audio/*" onchange="changeMusic()" />
            <br />
            <label for="musicToggle">Enable Music:</label>
            <input type="checkbox" id="musicToggle" checked onchange="toggleMusic()" />
            <br />
        </div>
    </div>

    <audio id="backgroundMusic" loop>
        <source src="https://www.bensound.com/bensound-music/bensound-sunny.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script>
        let musicEnabled = true;
        let musicPlayer = document.getElementById("backgroundMusic");

        // Play default music when called
        function playDefaultMusic() {
            if (musicEnabled) {
                musicPlayer.play().catch(error => {
                    console.error("Error playing default music: ", error);
                });
            }
        }

        function sendMessage() {
            const userInput = document.getElementById("userInput");
            const chatbox = document.getElementById("chatbox");
            const typingIndicator = document.getElementById("typingIndicator");

            if (userInput.value.trim() !== "") {
                // User message
                const userMessage = document.createElement("div");
                userMessage.className = "message user";
                userMessage.textContent = "You: " + userInput.value;
                chatbox.appendChild(userMessage);

                // Simulate bot response
                typingIndicator.style.display = "block";
                setTimeout(() => {
                    typingIndicator.style.display = "none";
                    const botMessage = document.createElement("div");
                    botMessage.className = "message bot";
                    botMessage.textContent = "ðŸ¤–: I'm a simple bot. You said: " + userInput.value;
                    chatbox.appendChild(botMessage);
                    chatbox.scrollTop = chatbox.scrollHeight; // Scroll to bottom
                }, 1000);

                userInput.value = ""; // Clear input
            }
        }

        function changeMusic() {
            const fileInput = document.getElementById("musicSource");
            const file = fileInput.files[0];

            if (file) {
                const reader = new FileReader();
                reader.onloadend = function () {
                    musicPlayer.src = reader.result; // Set new audio source
                    musicPlayer.play(); // Automatically play uploaded music
                }
                reader.readAsDataURL(file);
            }
        }

        function toggleMusic() {
            musicEnabled = document.getElementById("musicToggle").checked;
            if (musicEnabled) {
                playDefaultMusic();
            } else {
                musicPlayer.pause(); // Pause if music is disabled
            }
        }
    </script>
</body>

</html>
