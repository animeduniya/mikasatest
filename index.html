<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rishab Chatbot</title>
    <style>
        body {
            margin: 0;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #1c1c1c;
            animation: backgroundAnimation 20s ease-in-out infinite;
        }

        @keyframes backgroundAnimation {
            0% {
                background: url('https://wallpapercave.com/wp/wp9388551.jpg') center center / cover no-repeat;
            }
            25% {
                background: url('https://cdn.wallpapersafari.com/64/65/QhkeST.jpg') center center / cover no-repeat;
            }
            50% {
                background: url('https://png.pngtree.com/thumb_back/fw800/background/20230331/pngtree-starry-sky-forest-night-scene-image_2127839.jpg') center center / cover no-repeat;
            }
            75% {
                background: url('https://wallpaperaccess.com/full/8583147.jpg') center center / cover no-repeat;
            }
            100% {
                background: url('https://coolwallpapers.me/picsup/2503093-4k-hd-wallpaper-high-definition.jpg') center center / cover no-repeat;
            }
        }

        /* Pop-Up Styles */
        .popup {
            display: none;
            position: fixed;
            z-index: 2000;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(40, 40, 40, 0.95);
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
            width: 80%;
            max-width: 500px;
            padding: 20px;
            text-align: center;
            animation: popupAnimation 0.5s ease forwards;
        }

        @keyframes popupAnimation {
            from {
                opacity: 0;
                transform: translate(-50%, -60%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        .popup h2 {
            color: cyan; 
        }

        .popup p {
            color: white;
            margin: 1em 0;
        }

        .popup button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: cyan;
            color: black;
            cursor: pointer;
            transition: background 0.3s;
        }

        .popup button:hover {
            background-color: #00c8e1;
        }

        /* Container Styles */
        .container {
            width: 95%;
            max-width: 800px;
            height: 90vh;
            overflow-y: auto;
            background-color: rgba(30, 30, 30, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            position: relative;
            padding: 10px;
            border: 5px solid transparent; /* Initial border for RGB effect */
            animation: rgbBorder 5s linear infinite; /* RGB border animation */
        }

        @keyframes rgbBorder {
            0% { border-color: red; }
            16.67% { border-color: orange; }
            33.33% { border-color: yellow; }
            50% { border-color: green; }
            66.67% { border-color: blue; }
            83.33% { border-color: indigo; }
            100% { border-color: violet; }
        }

        /* Chat Window Styles */
        .chat-window {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 10px;
            position: relative;
            overflow-y: auto;
            border: 5px solid transparent; /* Same initial border for chat window */
            animation: rgbBorder 5s linear infinite; /* Apply same RGB animation */
        }

        .header, .sub-header {
            text-align: center;
            color: cyan;
            text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);
        }

        .header {
            font-size: 2.5em; /* Increased font sizes for better visibility */
            font-weight: bold;
        }

        .sub-header {
            font-size: 1.2em; /* Increased font sizes for better visibility */
            opacity: 0.8;
            margin-bottom: 15px;
        }

        /* Message Styles */
        .message {
            padding: 10px 15px;
            border-radius: 20px;
            margin: 5px 0;
            max-width: 70%;
            word-wrap: break-word;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.3s; /* Added transition for smooth hover effect */
        }

        /* User Message Style */
        .message.user {
            background-color: #00ccff; /* User messages */
            color: #000;
            align-self: flex-end;
            margin-left: auto; /* Align to right */
        }

        /* Bot Message Style */
        .message.bot {
            background-color: #4caf50; /* Bot responses */
            color: #fff;
            align-self: flex-start;
        }

        /* Chat History Styles */
        .chat-history {
            flex: 0 1 20%;
            overflow-y: auto;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 5px 10px rgba(255, 255, 255, 0.2);
        }

        .chat-history h3 {
            margin: 0;
            color: cyan; 
            text-align: center;
        }

        .chat-history ul {
            list-style-type: none;
            padding: 0;
        }

        .chat-history li {
            background: rgba(0, 255, 240, 0.2);
            color: cyan; 
            margin: 5px 0;
            padding: 8px;
            border-radius: 8px;
        }

        /* User Input Styles */
        .user-input {
            display: flex;
            align-items: center;
            padding: 10px 0;
        }

        .user-input input {
            flex: 1;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid cyan;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            margin-right: 10px;
            transition: border 0.3s;
        }

        .user-input input:focus {
            outline: none;
            border: 2px solid #00ccff;
        }

        .user-input button {
            border: none;
            font-size: 1.1em;
            padding: 10px 15px;
            border-radius: 30px;
            cursor: pointer;
            margin-left: 5px;
            background: cyan; /* Default button background */
            color: #ffffff;
            transition: background 0.3s, transform 0.2s;
        }

        .user-input button:hover {
            background: #00c8e1;
            transform: scale(1.05);
        }

        /* Action Button Styles */
        .action-button {
            width: 100%;
            padding: 12px;
            border-radius: 30px;
            color: #ffffff; 
            font-weight: bold;
            font-size: 1.1em;
            text-align: center;
            margin-top: 10px;
            background: cyan; 
            border: none;
            transition: all 0.3s;
        }

        .action-button:hover {
            background: #00c8e1;
            transform: scale(1.05);
        }

        /* Emoji Picker Styles */
        .emoji-picker {
            display: none;
            background: rgba(0, 0, 0, 0.8);
            position: absolute;
            z-index: 1000;
            border-radius: 10px;
            padding: 5px;
        }

        .emoji-picker button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5em;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(40, 40, 40, 0.95);
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 400px;
            overflow: hidden;
            border: 5px solid transparent; /* Border for RGB effect */
            animation: rgbBorder 5s linear infinite; /* Same RGB animation */
        }

        .modal-content {
            padding: 20px;
            color: #ffffff;
        }

        .modal-content label {
            margin-top: 10px;
            display: block;
            font-weight: bold;
            color: inherit; 
        }

        .modal-content input[type="text"],
        .modal-content select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid cyan;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        .modal-content button {
            border: none;
            color: #ffffff;
            font-size: 1em;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-top: 10px;
            width: 100%;
            background: cyan;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #00fff0;
            border-radius: 10px;
        }

        /* Theme Styles */
        body.theme-color-1 {
            color: #ff5722; /* Dark Orange */
        }
        body.theme-color-1 .header {
            color: #ff5722;
        }
        body.theme-color-1 .sub-header {
            color: #ff5722; 
        }
        body.theme-color-1 .user-input button,
        body.theme-color-1 .modal-content button,
        body.theme-color-1 .action-button {
            background: #ff5722;
            color: #ffffff;
        }

        body.theme-color-2 {
            color: #4caf50; 
        }
        body.theme-color-2 .header {
            color: #4caf50;
        }
        body.theme-color-2 .sub-header {
            color: #4caf50; 
        }
        body.theme-color-2 .user-input button,
        body.theme-color-2 .modal-content button,
        body.theme-color-2 .action-button {
            background: #4caf50;
            color: #ffffff;
        }

        body.theme-color-3 {
            color: #2196f3; 
        }
        body.theme-color-3 .header {
            color: #2196f3;
        }
        body.theme-color-3 .sub-header {
            color: #2196f3; 
        }
        body.theme-color-3 .user-input button,
        body.theme-color-3 .modal-content button,
        body.theme-color-3 .action-button {
            background: #2196f3;
            color: #ffffff;
        }

        body.theme-color-4 {
            color: #ffeb3b; 
        }
        body.theme-color-4 .header {
            color: #ffeb3b;
        }
        body.theme-color-4 .sub-header {
            color: #ffeb3b; 
        }
        body.theme-color-4 .user-input button,
        body.theme-color-4 .modal-content button,
        body.theme-color-4 .action-button {
            background: #ffeb3b;
            color: #000000;
        }

        body.theme-color-5 {
            color: #673ab7; 
        }
        body.theme-color-5 .header {
            color: #673ab7;
        }
        body.theme-color-5 .sub-header {
            color: #673ab7; 
        }
        body.theme-color-5 .user-input button,
        body.theme-color-5 .modal-content button,
        body.theme-color-5 .action-button {
            background: #673ab7;
            color: #ffffff;
        }

        body.theme-color-6 {
            color: #ff6a00; 
        }
        body.theme-color-6 .header {
            color: #ff6a00;
        }
        body.theme-color-6 .sub-header {
            color: #ff6a00; 
        }
        body.theme-color-6 .user-input button,
        body.theme-color-6 .modal-content button,
        body.theme-color-6 .action-button {
            background: #ff6a00;
            color: #ffffff;
        }

    </style>
</head>
<body>
    <div class="popup" id="introPopup">
        <h2>Welcome to Rishab Chatbot!</h2>
        <p>This is your personalized assistant. Engage in delightful conversations and receive daily facts!</p>
        <p id="dailyFact"></p>
        <button onclick="closePopup()">Got it!</button>
    </div>

    <div class="container" id="chatContainer">
        <div class="chat-history">
            <h3>Chat History</h3>
            <ul id="chatList"></ul>
            <button class="action-button" onclick="exportChat();">üé§ Export Chat</button>
            <button class="action-button" onclick="summarizeChat();">üìù Summarize Chat</button>
            <button class="action-button" onclick="resetChat();">üîÑ Add New Chat</button>
        </div>
        <div class="chat-window">
            <div class="header" id="chatbotName">Rishab - Your AI Companion</div>
            <div class="sub-header">Made by Rishab, Ansh, and Abhi</div>
            <div class="messages" id="chatbox" role="log" aria-live="polite"></div>
            <div class="user-input">
                <input type="text" id="userInput" placeholder="Type your message here..." onkeydown="if(event.key === 'Enter') sendMessage();" aria-label="Type your message" />
                <button onclick="sendMessage()">üì§</button>
                <button onclick="openSettings()">‚öôÔ∏è</button>
                <button onclick="toggleEmojiPicker()">üòÄ</button>
                <button onclick="startVoiceInput()">üé§</button>
                <button onclick="copyToClipboard()">üìã</button>
            </div>
            <div class="quick-replies">
                <span class="quick-reply" onclick="chooseQuickReply('Hello')">Hello</span>
                <span class="quick-reply" onclick="chooseQuickReply('Help')">Help</span>
                <span class="quick-reply" onclick="chooseQuickReply('Goodbye')">Goodbye</span>
            </div>
            <div class="emoji-picker" id="emojiPicker">
                <button onclick="addEmoji('üòÄ')">üòÄ</button>
                <button onclick="addEmoji('üòÅ')">üòÅ</button>
                <button onclick="addEmoji('üòÇ')">üòÇ</button>
                <button onclick="addEmoji('üòÉ')">üòÉ</button>
                <button onclick="addEmoji('üòÑ')">üòÑ</button>
                <button onclick="addEmoji('üòä')">üòä</button>
                <button onclick="addEmoji('üòç')">üòç</button>
                <button onclick="addEmoji('üòé')">üòé</button>
                <button onclick="addEmoji('üòú')">üòú</button>
                <button onclick="addEmoji('üò¢')">üò¢</button>
                <button onclick="addEmoji('üò°')">üò°</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span onclick="closeSettings()" style="float:right;cursor:pointer;color:#00fff0;">√ó</span>
            <h2>Settings</h2>

            <label for="botName">Chatbot Name:</label>
            <input type="text" id="botNameInput" value="Rishab" />

            <label for="language">Language:</label>
            <select id="language" onchange="changeLanguage()">
                <option value="en">English</option>
                <option value="es">Spanish</option>
                <option value="fr">French</option>
                <option value="de">German</option>
                <option value="it">Italian</option>
                <option value="jp">Japanese</option>
                <option value="cn">Chinese</option>
            </select>

            <label for="theme">Text Color Theme:</label>
            <select id="theme" onchange="changeTheme()">
                <option value="theme-color-1">Dark Orange</option>
                <option value="theme-color-2">Green</option>
                <option value="theme-color-3">Blue</option>
                <option value="theme-color-4">Yellow</option>
                <option value="theme-color-5">Purple</option>
                <option value="theme-color-6">Orange</option>
                <option value="default">Cyan (Default)</option>
            </select>

            <label for="musicUpload">Upload Music:</label>
            <input type="file" accept="audio/*" id="musicUpload" onchange="loadMusic(event)" />
            <button onclick="playMusic()">Play/Pause Music</button>
            <label>Volume:</label>
            <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="0.5" onchange="setVolume(this.value)" />

            <label class="example-checkbox">
                <input type="checkbox" id="voiceToggle" onchange="toggleVoice()" checked>
                <div class="switch">
                    <div class="circle"></div>
                </div>
                Enable Voice
            </label>

            <button onclick="setReminder()">Set Reminder</button>
            <button onclick="showDailyFact()">Get Daily Fact/Quote</button>

            <label for="feedback">Feedback:</label>
            <select id="feedback" onchange="sendFeedback()">
                <option value="">Select Feedback</option>
                <option value="helpful">Helpful</option>
                <option value="not_helpful">Not Helpful</option>
            </select>

            <button onclick="resetChat()">Reset Chat</button>
        </div>
    </div>

    <audio id="musicPlayer" src="" preload="auto"></audio>

    <script src="https://js.puter.com/v2/"></script>
    <script>
        let chatbotName = "Rishab";
        let voiceEnabled = true;
        let messageCount = 0;
        const chatMessages = [];
        const chatAnswers = [];
        const musicPlayer = document.getElementById('musicPlayer');
        let speechSynthesisInstance = window.speechSynthesis;

        // List of daily facts
        const facts = [
            "Did you know? Honey never spoils!",
            "Bananas are berries, but strawberries aren't.",
            "The Eiffel Tower can be 15 cm taller during the summer.",
            "A group of flamingos is called a 'flamboyance'.",
            "Octopuses have three hearts.",
            "Did you know that wombat poop is cube-shaped?",
            "One teaspoon of honey is the life work of 12 bees.",
            "An octopus has nine brains!",
            "The longest wedding veil was longer than 63 football fields!",
            "A day on Venus is longer than a year on Venus."
        ];

        window.onload = function () {
            loadPreferences();
            displayRandomFact();
            document.getElementById("introPopup").style.display = "block"; // Show pop-up on load
        };

        function loadPreferences() {
            const savedLang = localStorage.getItem('language');
            const savedTheme = localStorage.getItem('theme');
            const savedBotName = localStorage.getItem('botName');

            if (savedLang) {
                document.getElementById("language").value = savedLang;
            }

            if (savedTheme) {
                document.body.className = '';
                document.body.classList.add(savedTheme);
            } else {
                document.body.classList.add('default');
            }

            if (savedBotName) {
                chatbotName = savedBotName;
                document.getElementById("chatbotName").innerText = chatbotName + " - Your AI Companion";
                document.getElementById("botNameInput").value = chatbotName;
            }
        }

        function displayRandomFact() {
            const randomFact = facts[Math.floor(Math.random() * facts.length)];
            document.getElementById("dailyFact").textContent = randomFact;
        }

        function loadMusic(event) {
            const file = event.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                musicPlayer.src = url;
            }
        }

        function playMusic() {
            if (musicPlayer.paused) {
                musicPlayer.play();
            } else {
                musicPlayer.pause();
            }
        }

        function setVolume(value) {
            musicPlayer.volume = value;
        }

        function speakResponse(response) {
            if (speechSynthesisInstance.speaking) {
                speechSynthesisInstance.cancel();
            }

            if (voiceEnabled) {
                const utterance = new SpeechSynthesisUtterance(response);
                utterance.lang = "en-US";
                speechSynthesisInstance.speak(utterance);
            }
        }

        async function sendMessage() {
            const userInput = document.getElementById("userInput");
            const chatbox = document.getElementById("chatbox");
            const chatList = document.getElementById("chatList");

            if (userInput.value.trim()) {
                const userMessage = userInput.value.trim();
                const userMessageDiv = document.createElement("div");
                userMessageDiv.className = "message user";
                userMessageDiv.textContent = "üßë: " + userMessage;
                chatbox.appendChild(userMessageDiv);
                chatList.appendChild(document.createElement("li")).textContent = userMessage;
                chatMessages.push(userMessage); // Store question

                const typingIndicator = document.createElement("div");
                typingIndicator.innerHTML = "<em>ü§ñ Rishab is typing...</em>";
                chatbox.appendChild(typingIndicator);

                try {
                    await delayResponse(); // Simulate thinking delay
                    let response;

                    if (/what's your name|who are you/i.test(userMessage)) {
                        response = `My name is ${chatbotName}.`;
                    } else if (/who made you|your creator/i.test(userMessage)) {
                        response = "I was made by Rishab.";
                    } else {
                        response = await puter.ai.chat(userMessage); // Use chat service
                    }

                    chatbox.removeChild(typingIndicator);

                    const botMessageDiv = document.createElement("div");
                    botMessageDiv.className = "message bot";
                    botMessageDiv.textContent = `ü§ñ ${chatbotName}: ${response || "I'm still learning!"}`;
                    chatbox.appendChild(botMessageDiv);

                    chatAnswers.push(`ü§ñ ${chatbotName}: ${response || "I'm still learning!"}`);
                    
                    speakResponse(response);
                    messageCount++;
                } catch (error) {
                    const errorMessageDiv = document.createElement("div");
                    errorMessageDiv.className = "message bot";
                    errorMessageDiv.textContent = `ü§ñ ${chatbotName}: Oops! Something went wrong. Please try again.`;
                    chatbox.appendChild(errorMessageDiv);
                }

                chatbox.scrollTop = chatbox.scrollHeight;
                userInput.value = ""; // Clear input
            }
        }

        function delayResponse() {
            return new Promise(resolve => setTimeout(resolve, 1000)); // Simulates typing delay
        }

        function addEmoji(emoji) {
            const userInput = document.getElementById("userInput");
            userInput.value += emoji;
            document.getElementById('emojiPicker').style.display = 'none'; // Hide emoji picker
        }

        function toggleEmojiPicker() {
            const emojiPicker = document.getElementById('emojiPicker');
            emojiPicker.style.display = emojiPicker.style.display === 'block' ? 'none' : 'block';
        }

        function chooseQuickReply(reply) {
            const userInput = document.getElementById("userInput");
            userInput.value += reply; // Append the quick reply to input
            sendMessage(); // Send the message
        }

        function copyToClipboard() {
            const lastMessageElement = document.getElementById("chatbox").lastChild;
            if (lastMessageElement) {
                const textToCopy = lastMessageElement.textContent;
                navigator.clipboard.writeText(textToCopy).then(() => {
                    alert("Copied to clipboard: " + textToCopy);
                });
            }
        }

        function summarizeChat() {
            const summaryDiv = document.createElement("div");
            summaryDiv.className = "message bot";
            const summaryText = `Chat Summary:\nOverview of your questions: ${chatMessages.join(", ")}.\nTotal Messages: ${chatMessages.length}`;
            summaryDiv.textContent = summaryText;
            document.getElementById("chatbox").appendChild(summaryDiv);
            document.getElementById("chatbox").scrollTop = document.getElementById("chatbox").scrollHeight; 
        }

        function exportChat() {
            let exportText = "";
            for (let i = 0; i < chatMessages.length; i++) {
                exportText += `üßë: ${chatMessages[i]}\n${chatAnswers[i]}\n`;
            }
            const blob = new Blob([exportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'chat_history.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        function changeLanguage() {
            const selectedLanguage = document.getElementById("language").value;
            localStorage.setItem('language', selectedLanguage);
            alert("Language changed to: " + selectedLanguage);
        }

        function changeTheme() {
            const selectedTheme = document.getElementById("theme").value;
            document.body.className = ''; // Reset classes
            document.body.classList.add(selectedTheme);
            localStorage.setItem('theme', selectedTheme);
            if (selectedTheme === 'default') {
                document.querySelector('.action-button').style.background = 'cyan'; // Ensure summarize button is cyan
            }
        }

        function resetChat() {
            const chatbox = document.getElementById("chatbox");
            const chatList = document.getElementById("chatList");
            chatbox.innerHTML = "";
            chatList.innerHTML = "";
            messageCount = 0;
            chatMessages.length = 0; 
            chatAnswers.length = 0; 
        }

        function openSettings() {
            document.getElementById("settingsModal").style.display = "block";
        }

        function closeSettings() {
            const newBotName = document.getElementById("botNameInput").value;
            if (newBotName) {
                chatbotName = newBotName;
                document.getElementById("chatbotName").innerText = chatbotName + " - Your AI Companion";
                localStorage.setItem('botName', chatbotName);
            }
            document.getElementById("settingsModal").style.display = "none";
        }

        function toggleVoice() {
            voiceEnabled = document.getElementById("voiceToggle").checked;
            alert("Voice responses are now " + (voiceEnabled ? "enabled" : "disabled") + ".");
        }

        function setReminder() {
            const reminderText = prompt("What would you like to be reminded about?");
            if (reminderText) {
                setTimeout(() => {
                    alert(`Reminder: ${reminderText}`);
                }, 10000); // Remind after 10 seconds for demonstration purposes
                alert("Reminder set! You will be alerted in 10 seconds.");
            }
        }

        function showDailyFact() {
            const randomFact = facts[Math.floor(Math.random() * facts.length)];
            alert(`Daily Fact: ${randomFact}`);
        }

        function closePopup() {
            document.getElementById("introPopup").style.display = "none"; // Close the introductory popup
        }

        function sendFeedback() {
            const feedback = document.getElementById("feedback").value;
            if (feedback) {
                alert("Thank you for your feedback: " + feedback);
                document.getElementById("feedback").value = "";
            }
        }
    </script>
</body>
</html>
